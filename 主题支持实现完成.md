# TreeTable ä¸»é¢˜æ”¯æŒå®ç°å®Œæˆ âœ…

## ğŸ‰ å·²å®ŒæˆåŠŸèƒ½

ä¸º TreeTable ç»„ä»¶æˆåŠŸæ·»åŠ äº†å®Œæ•´çš„æ·±è‰²æ¨¡å¼å’Œæ˜äº®æ¨¡å¼æ”¯æŒ!

### æ ¸å¿ƒåŠŸèƒ½

1. **ä¸‰ç§ä¸»é¢˜æ¨¡å¼**
   - â˜€ï¸ æ˜äº®æ¨¡å¼ (light) - é»˜è®¤æ¨¡å¼
   - ğŸŒ™ æ·±è‰²æ¨¡å¼ (dark) - æŠ¤çœ¼æ¨¡å¼
   - ğŸ”„ è·Ÿéšç³»ç»Ÿ (auto) - è‡ªåŠ¨åˆ‡æ¢

2. **è‡ªå®šä¹‰ä¸»é¢˜å˜é‡**
   - æ”¯æŒ 40+ CSS å˜é‡è‡ªå®šä¹‰
   - åŒ…æ‹¬èƒŒæ™¯è‰²ã€æ–‡å­—è‰²ã€è¾¹æ¡†è‰²ã€äº¤äº’è‰²ç­‰
   - å®Œå…¨ç±»å‹å®‰å…¨çš„é…ç½®

## ğŸ“ æ–°å¢å’Œä¿®æ”¹çš„æ–‡ä»¶

### æ–°å¢æ–‡ä»¶

1. **ä¸»é¢˜æ ·å¼**
   - `packages/tree-table/src/styles/TreeTable.theme.css` - ä¸»é¢˜ CSS å˜é‡å®šä¹‰

2. **æ–‡æ¡£**
   - `packages/tree-table/THEME_GUIDE.zh.md` - ä¸­æ–‡ä¸»é¢˜æŒ‡å—
   - `packages/tree-table/THEME_GUIDE.md` - è‹±æ–‡ä¸»é¢˜æŒ‡å—
   - `packages/tree-table/THEME_UPDATE.md` - æ›´æ–°è¯´æ˜
   - `THEME_IMPLEMENTATION_SUMMARY.md` - å®ç°æ€»ç»“

### ä¿®æ”¹æ–‡ä»¶

1. **ç±»å‹å®šä¹‰**
   - `packages/tree-table/src/types/index.ts` - æ·»åŠ  `ThemeConfig` å’Œ `ThemeType`

2. **ç»„ä»¶ä»£ç **
   - `packages/tree-table/src/components/TreeTable.tsx` - æ”¯æŒ `theme` å±æ€§
   - `packages/tree-table/src/index.ts` - å¯¼å‡ºä¸»é¢˜ç±»å‹

3. **ç¤ºä¾‹ä»£ç **
   - `packages/tree-table/src/components/TreeTable.stories.tsx` - æ·»åŠ ä¸»é¢˜åˆ‡æ¢ç¤ºä¾‹

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ä½¿ç”¨æ·±è‰²æ¨¡å¼

```tsx
import { TreeTable } from '@kfb/tree-table';

<TreeTable 
  data={data}
  columns={columns}
  theme={{ mode: 'dark' }}
/>
```

### 2. ä¸»é¢˜åˆ‡æ¢

```tsx
import { useState } from 'react';

function App() {
  const [theme, setTheme] = useState<'light' | 'dark'>('light');

  return (
    <>
      <button onClick={() => setTheme(theme === 'light' ? 'dark' : 'light')}>
        åˆ‡æ¢ä¸»é¢˜
      </button>
      <TreeTable data={data} columns={columns} theme={{ mode: theme }} />
    </>
  );
}
```

### 3. è‡ªå®šä¹‰ä¸»é¢˜é¢œè‰²

```tsx
<TreeTable 
  data={data}
  columns={columns}
  theme={{
    mode: 'dark',
    cssVariables: {
      // è‡ªå®šä¹‰ä¸»è‰²è°ƒ
      '--tree-table-primary-color': '#7c3aed',
      // è‡ªå®šä¹‰å¼ºè°ƒè‰²
      '--tree-table-accent-color': '#f59e0b',
      // è‡ªå®šä¹‰èƒŒæ™¯è‰²
      '--tree-table-bg-container': '#0f0f0f',
    }
  }}
/>
```

## ğŸ“š æŸ¥çœ‹æ–‡æ¡£

è¯¦ç»†ä½¿ç”¨è¯´æ˜è¯·æŸ¥çœ‹:
- [ä¸»é¢˜æŒ‡å— (ä¸­æ–‡)](packages/tree-table/THEME_GUIDE.zh.md) - å®Œæ•´çš„ä½¿ç”¨æ–‡æ¡£
- [ä¸»é¢˜æŒ‡å— (English)](packages/tree-table/THEME_GUIDE.md) - Full documentation
- [æ›´æ–°è¯´æ˜](packages/tree-table/THEME_UPDATE.md) - æ›´æ–°æ¦‚è§ˆ

## ğŸ¨ åœ¨ Storybook ä¸­æŸ¥çœ‹

è¿è¡Œ Storybook æŸ¥çœ‹äº¤äº’å¼ä¸»é¢˜æ¼”ç¤º:

```bash
pnpm storybook
```

æŸ¥æ‰¾ä»¥ä¸‹ç¤ºä¾‹:
- **ThemeSwitching** - ä¸‰ç§ä¸»é¢˜æ¨¡å¼åˆ‡æ¢æ¼”ç¤º
- **CustomTheme** - è‡ªå®šä¹‰å“ç‰Œä¸»é¢˜æ¼”ç¤º

## ğŸ¯ æŠ€æœ¯äº®ç‚¹

1. **é›¶ç ´åæ€§å˜æ›´** - å®Œå…¨å‘åå…¼å®¹,ç°æœ‰ä»£ç æ— éœ€ä¿®æ”¹
2. **ç±»å‹å®‰å…¨** - å®Œæ•´çš„ TypeScript ç±»å‹æ”¯æŒ
3. **æ€§èƒ½ä¼˜åŒ–** - ä½¿ç”¨ useMemo ç¼“å­˜ä¸»é¢˜é…ç½®
4. **å‘½åç©ºé—´** - æ‰€æœ‰ CSS å˜é‡ä»¥ `--tree-table-` ä¸ºå‰ç¼€
5. **çµæ´»å®šåˆ¶** - æ”¯æŒä»»æ„æ•°é‡çš„è‡ªå®šä¹‰å˜é‡

## ğŸ“Š CSS å˜é‡æ¦‚è§ˆ

æ”¯æŒè‡ªå®šä¹‰çš„å˜é‡ç±»åˆ«:

| ç±»åˆ« | å˜é‡æ•°é‡ | ç¤ºä¾‹ |
|------|---------|------|
| èƒŒæ™¯è‰² | 10 | `--tree-table-bg-container` |
| æ–‡å­—è‰² | 5 | `--tree-table-text-primary` |
| è¾¹æ¡†è‰² | 2 | `--tree-table-border-color` |
| äº¤äº’è‰² | 6 | `--tree-table-primary-color` |
| æ‹–æ‹½çŠ¶æ€ | 3 | `--tree-table-drag-bg` |
| å…¶ä»– | 2 | `--tree-table-line-color` |

å®Œæ•´å˜é‡åˆ—è¡¨è¯·æŸ¥çœ‹ [ä¸»é¢˜æŒ‡å—](packages/tree-table/THEME_GUIDE.zh.md)

## ğŸŒ æµè§ˆå™¨æ”¯æŒ

- **CSS Variables**: æ‰€æœ‰ç°ä»£æµè§ˆå™¨
- **prefers-color-scheme** (auto æ¨¡å¼): 
  - Chrome 76+
  - Firefox 67+
  - Safari 12.1+
  - Edge 79+

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. ä¸å…¨å±€ä¸»é¢˜ç³»ç»Ÿé›†æˆ

```tsx
import { useTheme } from './ThemeContext';

function DataGrid() {
  const { theme } = useTheme();
  
  return (
    <TreeTable 
      data={data}
      columns={columns}
      theme={{ mode: theme }}
    />
  );
}
```

### 2. ç›‘å¬ç³»ç»Ÿä¸»é¢˜å˜åŒ–

```tsx
import { useState, useEffect } from 'react';

function useSystemTheme() {
  const [isDark, setIsDark] = useState(
    window.matchMedia('(prefers-color-scheme: dark)').matches
  );

  useEffect(() => {
    const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
    const handler = (e: MediaQueryListEvent) => setIsDark(e.matches);
    
    mediaQuery.addEventListener('change', handler);
    return () => mediaQuery.removeEventListener('change', handler);
  }, []);

  return isDark;
}
```

### 3. ä¸»é¢˜æŒä¹…åŒ–

```tsx
import { useState, useEffect } from 'react';

function App() {
  const [theme, setTheme] = useState<'light' | 'dark'>(() => {
    return localStorage.getItem('theme') as 'light' | 'dark' || 'light';
  });

  useEffect(() => {
    localStorage.setItem('theme', theme);
  }, [theme]);

  return <TreeTable data={data} columns={columns} theme={{ mode: theme }} />;
}
```

## ğŸ› æ•…éšœæ’æŸ¥

### ä¸»é¢˜æ ·å¼æ²¡æœ‰ç”Ÿæ•ˆ?

ç¡®ä¿å¯¼å…¥äº†ä¸»é¢˜æ ·å¼æ–‡ä»¶:

```tsx
import '@kfb/tree-table/dist/styles/TreeTable.css';
import '@kfb/tree-table/dist/styles/TreeTable.theme.css'; // â¬…ï¸ ä¸»é¢˜æ ·å¼
```

### Auto æ¨¡å¼ä¸å·¥ä½œ?

1. æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒ `prefers-color-scheme`
2. æ£€æŸ¥æ“ä½œç³»ç»Ÿæ˜¯å¦å·²è®¾ç½®æ·±è‰²/æ˜äº®æ¨¡å¼
3. åœ¨æµè§ˆå™¨å¼€å‘å·¥å…·ä¸­æµ‹è¯•:
   - Chrome: DevTools > Rendering > Emulate CSS media feature prefers-color-scheme
   - Firefox: about:config > ui.systemUsesDarkTheme

## ğŸ¬ ä¸‹ä¸€æ­¥

æœªæ¥å¯ä»¥è€ƒè™‘çš„æ”¹è¿›:

1. **æ›´å¤šé¢„è®¾ä¸»é¢˜** - æä¾›å¤šç§å†…ç½®ä¸»é¢˜æ–¹æ¡ˆ
2. **ä¸»é¢˜ç”Ÿæˆå™¨** - åœ¨çº¿å¯è§†åŒ–ä¸»é¢˜é…ç½®å·¥å…·
3. **ä¸»é¢˜å¹³æ»‘è¿‡æ¸¡** - æ·»åŠ ä¸»é¢˜åˆ‡æ¢åŠ¨ç”»
4. **ä¸»é¢˜å¯¼å…¥å¯¼å‡º** - æ”¯æŒä¸»é¢˜é…ç½®çš„ä¿å­˜å’Œåˆ†äº«

## âœ¨ æ€»ç»“

æˆåŠŸä¸º TreeTable ç»„ä»¶æ·»åŠ äº†ä¼ä¸šçº§çš„ä¸»é¢˜æ”¯æŒç³»ç»Ÿ:

- âœ… æ”¯æŒæ˜äº®/æ·±è‰²/è·Ÿéšç³»ç»Ÿä¸‰ç§æ¨¡å¼
- âœ… 40+ å¯è‡ªå®šä¹‰ CSS å˜é‡
- âœ… å®Œæ•´çš„ç±»å‹å®šä¹‰å’Œæ–‡æ¡£
- âœ… Storybook äº¤äº’å¼ç¤ºä¾‹
- âœ… é›¶ç ´åæ€§å˜æ›´,å‘åå…¼å®¹

ç°åœ¨ç”¨æˆ·å¯ä»¥è½»æ¾åœ°ä¸ºè¡¨æ ¼åº”ç”¨æ·±è‰²æ¨¡å¼,æˆ–æ ¹æ®å“ç‰Œéœ€æ±‚è‡ªå®šä¹‰ä¸»é¢˜é¢œè‰²!ğŸ¨
